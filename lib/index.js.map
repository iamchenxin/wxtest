{"version":3,"sources":["index.js"],"names":["express","require","app","setEncode","base","path","tmpdir","subPath","resolve","paths","get","req","res","send","logStr","writeFile","str","readFile","listen","console","log"],"mappings":";;AAIA;;AAEA;;;;AAJA,MAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,MAAMC,MAAMF,SAAZ;;AAEA,OAAGG,SAAH,CAAa,MAAb;;AAEA,MAAMC,OAAOH,QAAQ,mBAAR,CAAb;AACA,MAAMI,OAAOJ,QAAQ,MAAR,CAAb;AACA,SAASK,MAAT,CAAgBC,OAAhB,EAAyB;AACvB,SAAOF,KAAKG,OAAL,CAAaJ,KAAKK,KAAL,CAAWH,MAAxB,EAAgCC,OAAhC,CAAP;AACD;;AAEDL,IAAIQ,GAAJ,CAAQ,GAAR,EAAa,UAASC,GAAT,EAAcC,GAAd,EAAmB;AAC9BA,MAAIC,IAAJ,CAAS,cAAT;AACA,QAAMC,SAAU,UAAQ,uBAAWH,GAAX,CAAgB,KAAxC;AACA,SAAGI,SAAH,CAAaT,OAAO,KAAP,CAAb,EAA4BQ,MAA5B;AACD,CAJD;;AAMAZ,IAAIQ,GAAJ,CAAQ,MAAR;AAAA,+BAAgB,WAAOC,GAAP,EAAYC,GAAZ,EAAoB;AAClC,UAAMI,MAAM,MAAM,OAAGC,QAAH,CAAYX,OAAO,KAAP,CAAZ,CAAlB;AACAM,QAAIC,IAAJ,CAASG,GAAT;AACD,GAHD;;AAAA;AAAA;AAAA;AAAA;;AAKAd,IAAIgB,MAAJ,CAAW,KAAX,EAAkB,YAAW;AAC3BC,UAAQC,GAAR,CAAY,sCAAZ;AACD,CAFD","file":"index.js","sourcesContent":["// @flow\n\nconst express = require('express');\nconst app = express();\nimport { fs } from './utils/fs.js';\nfs.setEncode('utf8');\nimport { JSONstring, format, formatProp } from './utils/tools.js';\nconst base = require('../config/base.js');\nconst path = require('path');\nfunction tmpdir(subPath) {\n  return path.resolve(base.paths.tmpdir, subPath);\n}\n\napp.get('/', function(req, res) {\n  res.send('Hello World!');\n  const logStr = `req:\\n${formatProp(req)}\\n`;\n  fs.writeFile(tmpdir('log'), logStr);\n});\n\napp.get('/log', async (req, res) => {\n  const str = await fs.readFile(tmpdir('log'));\n  res.send(str);\n});\n\napp.listen(18801, function() {\n  console.log('Example app listening on port 18801!');\n});\n"],"sourceRoot":"/home/iamchenxin/project/workout/wxtest/src"}